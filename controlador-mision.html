<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Control de Lanzamiento</title>
  <script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
import { getFirestore, collection, getDocs, doc, updateDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAiLw2zwfsjdMP-IlEoE5JugyFvmaQLFC0",
  authDomain: "halcon-space-348e7.firebaseapp.com",
  projectId: "halcon-space-348e7",
  storageBucket: "halcon-space-348e7.firebasestorage.app",
  messagingSenderId: "741724706453",
  appId: "1:741724706453:web:519531e63f2b923f952d9c",
  measurementId: "G-VG1Y2YMY4W"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

let lanzamientoId = null;
let misionActual = null;
let contadorInterval = null;
let tiempoCongelado = null;
let unsubscribe = null;

const capitalize = str => str ? str.charAt(0).toUpperCase() + str.slice(1) : "";

function getLaunchUTC(fechaStr, timeStr) {
  const [day, month, year] = fechaStr.split("/").map(Number);
  const [hours = 0, minutes = 0, seconds = 0] = (timeStr || "00:00:00").split(":").map(Number);
  return new Date(Date.UTC(year, month - 1, day, hours, minutes, seconds));
}

function calcularContador(fechaStr, timeStr, ahora = new Date()) {
  const lanzamiento = getLaunchUTC(fechaStr, timeStr);
  let diff = lanzamiento - ahora;
  let signo = "T-";
  if(diff < 0){
    signo = "T+";
    diff = Math.abs(diff);
  }
  const dias = Math.floor(diff / 86400000);
  const horas = String(Math.floor((diff % 86400000) / 3600000)).padStart(2, "0");
  const minutos = String(Math.floor((diff % 3600000) / 60000)).padStart(2, "0");
  const segundos = String(Math.floor((diff % 60000) / 1000)).padStart(2, "0");
  
  if(dias > 0) {
    return `${signo}${dias}D / ${horas}:${minutos}:${segundos}`;
  }
  return `${signo}${horas}:${minutos}:${segundos}`;
}

function mostrarNotificacion(mensaje, tipo = 'success') {
  const notif = document.getElementById('notificacion');
  notif.textContent = mensaje;
  notif.className = `notificacion ${tipo}`;
  notif.style.display = 'block';
  setTimeout(() => notif.style.display = 'none', 3000);
}

document.addEventListener("DOMContentLoaded", async () => {
  const selector = document.getElementById("selectorMision");
  const form = document.getElementById("formT0");
  const estadoElem = document.getElementById("estadoActual");
  const contadorElem = document.getElementById("contadorDisplay");
  const holdTimeElem = document.getElementById("holdTime");
  const switchTelemetria = document.getElementById("switchTelemetria");
  const labelTelemetria = document.getElementById("labelTelemetria");
  const lanzamientoIdElem = document.getElementById("lanzamientoId");
  const formWindow = document.getElementById("formWindow");
  const windowDisplay = document.getElementById("windowDisplay");
  const btnEliminarWindow = document.getElementById("btnEliminarWindow");
  const missionNameElem = document.getElementById("missionName");

  // Click para copiar ID
  lanzamientoIdElem.addEventListener("click", () => {
    if (lanzamientoId) {
      navigator.clipboard.writeText(lanzamientoId).then(() => {
        mostrarNotificacion("üìã ID copiado al portapapeles", 'success');
      });
    }
  });

  const snap = await getDocs(collection(db, "lanzamientos"));
  let misiones = snap.docs.map(docSnap => ({ id: docSnap.id, ...docSnap.data() }));
  misiones.sort((a,b) => getLaunchUTC(b.fecha, b.timeUTC || "00:00:00") - getLaunchUTC(a.fecha, a.timeUTC || "00:00:00"));

  misiones.forEach(m => {
    const option = document.createElement("option");
    option.value = m.id;
    option.textContent = `${m.nombre} (${m.fecha})`;
    selector.appendChild(option);
  });

  if(misiones.length > 0){
    lanzamientoId = misiones[0].id;
    selector.value = lanzamientoId;
    cargarDatosMision(misiones[0]);
  }

  selector.addEventListener("change", e => {
    lanzamientoId = e.target.value;
    const m = misiones.find(m => m.id === lanzamientoId);
    if(m) cargarDatosMision(m);
  });

  function actualizarVistaWindow(window) {
    const btnEditarWindow = document.getElementById('btnEditarWindow');
    
    if (!window || window === null) {
      windowDisplay.style.display = 'none';
      formWindow.style.display = 'block';
      btnEliminarWindow.style.display = 'none';
      btnEditarWindow.style.display = 'none';
      formWindow.reset();
      formWindow.querySelector('button[type="submit"]').textContent = 'Establecer Ventana';
    } else {
      windowDisplay.style.display = 'block';
      formWindow.style.display = 'none';
      btnEliminarWindow.style.display = 'block';
      btnEditarWindow.style.display = 'block';
      
      const inicio = new Date(window.start);
      const fin = new Date(window.end);
      
      document.getElementById('windowStart').textContent = inicio.toLocaleString('es-UY');
      document.getElementById('windowEnd').textContent = fin.toLocaleString('es-UY');
      
      const duracion = Math.abs(fin - inicio);
      const minutos = Math.floor(duracion / 60000);
      document.getElementById('windowDuration').textContent = `${minutos} minutos`;
    }
  }

  function cargarDatosMision(mision){
    misionActual = mision;
    lanzamientoIdElem.textContent = mision.id;
    missionNameElem.textContent = mision.nombre || 'Sin nombre';
    form.fecha.value = mision.fecha.split("/").reverse().join("-");
    form.hora.value = mision.timeUTC || "00:00:00";

    estadoElem.textContent = capitalize(mision.estado || "Desconocido");
    estadoElem.className = `badge ${mision.estado || "desconocido"}`;
    
    // Mostrar u ocultar bot√≥n de reanudar
    if (mision.estado === "hold" && mision.holdTime) {
      btnReanudar.style.display = 'block';
    } else {
      btnReanudar.style.display = 'none';
    }
    
    holdTimeElem.textContent = mision.holdTime ? `‚è∏Ô∏è ${new Date(mision.holdTime).toLocaleString('es-UY')}` : "";

    if(contadorInterval) clearInterval(contadorInterval);
    tiempoCongelado = (mision.estado === "hold" || mision.estado === "scrub") ? (mision.holdTime ? new Date(mision.holdTime) : new Date()) : null;
    
    contadorInterval = setInterval(() => {
      const ahora = tiempoCongelado ? new Date(tiempoCongelado) : new Date();
      contadorElem.textContent = calcularContador(misionActual.fecha, misionActual.timeUTC, ahora);
    }, 1000);

    switchTelemetria.checked = mision.telemetria_on ?? false;
    labelTelemetria.textContent = switchTelemetria.checked ? "ON" : "OFF";

    actualizarVistaWindow(mision.window);

    if(unsubscribe) unsubscribe();
    unsubscribe = onSnapshot(doc(db, "lanzamientos", mision.id), (docSnap) => {
      if(docSnap.exists()) {
        const data = docSnap.data();
        misionActual = { id: docSnap.id, ...data };
        estadoElem.textContent = capitalize(data.estado || "Desconocido");
        estadoElem.className = `badge ${data.estado || "desconocido"}`;
        switchTelemetria.checked = data.telemetria_on ?? false;
        labelTelemetria.textContent = switchTelemetria.checked ? "ON" : "OFF";
        actualizarVistaWindow(data.window);
        holdTimeElem.textContent = data.holdTime ? `‚è∏Ô∏è ${new Date(data.holdTime).toLocaleString('es-UY')}` : "";
        
        // Actualizar visibilidad del bot√≥n reanudar
        if (data.estado === "hold" && data.holdTime) {
          btnReanudar.style.display = 'block';
        } else {
          btnReanudar.style.display = 'none';
        }
      }
    });
  }

  const botonesEstado = document.querySelectorAll("button[data-estado]");

  botonesEstado.forEach(btn => {
    btn.addEventListener("click", async () => {
      if (!misionActual) return mostrarNotificacion("‚ö†Ô∏è Selecciona una misi√≥n primero", 'error');
      
      btn.disabled = true;
      const nuevoEstado = btn.dataset.estado;
      let updateData = { estado: nuevoEstado };

      if (nuevoEstado === "hold" || nuevoEstado === "scrub") {
        updateData.holdTime = new Date().toISOString();
      } else {
        updateData.holdTime = null;
      }

      try {
        await updateDoc(doc(db, "lanzamientos", misionActual.id), updateData);
        misionActual.estado = nuevoEstado;
        misionActual.holdTime = updateData.holdTime;
        
        if (nuevoEstado === "hold" || nuevoEstado === "scrub") {
          tiempoCongelado = new Date();
        } else {
          tiempoCongelado = null;
        }
        
        estadoElem.textContent = capitalize(nuevoEstado);
        estadoElem.className = `badge ${nuevoEstado}`;
        holdTimeElem.textContent = updateData.holdTime ? `‚è∏Ô∏è ${new Date(updateData.holdTime).toLocaleString('es-UY')}` : "";
        
        // Mostrar bot√≥n reanudar si est√° en hold
        if (nuevoEstado === "hold") {
          btnReanudar.style.display = 'block';
        } else {
          btnReanudar.style.display = 'none';
        }
        
        mostrarNotificacion(`‚úÖ Estado actualizado a: ${capitalize(nuevoEstado)}`, 'success');
      } catch(e) {
        mostrarNotificacion(`‚ùå Error al actualizar: ${e.message}`, 'error');
      } finally {
        btn.disabled = false;
      }
    });
  });

  switchTelemetria.addEventListener("change", async () => {
    if(!misionActual) return mostrarNotificacion("‚ö†Ô∏è Selecciona una misi√≥n primero", 'error');
    
    const nuevoEstado = switchTelemetria.checked;
    try {
      await updateDoc(doc(db, "lanzamientos", misionActual.id), {
        telemetria_on: nuevoEstado
      });
      labelTelemetria.textContent = nuevoEstado ? "ON" : "OFF";
      misionActual.telemetria_on = nuevoEstado;
      mostrarNotificacion(`üì° Telemetr√≠a ${nuevoEstado ? "activada" : "desactivada"}`, 'success');
    } catch(e) {
      mostrarNotificacion(`‚ùå Error: ${e.message}`, 'error');
      switchTelemetria.checked = !nuevoEstado;
    }
  });

  form.addEventListener("submit", async e => {
    e.preventDefault();
    if(!lanzamientoId) return mostrarNotificacion("‚ö†Ô∏è Selecciona una misi√≥n primero", 'error');

    const submitBtn = form.querySelector('button[type="submit"]');
    submitBtn.disabled = true;

    const fecha = form.fecha.value.split("-").reverse().join("/");
    const hora = form.hora.value;
    const utcTime = getLaunchUTC(fecha, hora).toISOString();

    try {
      await updateDoc(doc(db, "lanzamientos", lanzamientoId), {
        fecha,
        timeUTC: hora,
        utcTime
      });
      misionActual.fecha = fecha;
      misionActual.timeUTC = hora;
      mostrarNotificacion("‚úÖ T-0 actualizado correctamente", 'success');
    } catch(e) {
      mostrarNotificacion(`‚ùå Error al actualizar: ${e.message}`, 'error');
    } finally {
      submitBtn.disabled = false;
    }
  });

  formWindow.addEventListener("submit", async e => {
    e.preventDefault();
    if(!lanzamientoId) return mostrarNotificacion("‚ö†Ô∏è Selecciona una misi√≥n primero", 'error');

    const submitBtn = formWindow.querySelector('button[type="submit"]');
    submitBtn.disabled = true;

    const startDate = formWindow.windowStartDate.value;
    const startTime = formWindow.windowStartTime.value;
    const endDate = formWindow.windowEndDate.value;
    const endTime = formWindow.windowEndTime.value;

    const startISO = `${startDate}T${startTime}.000Z`;
    const endISO = `${endDate}T${endTime}.000Z`;

    try {
      await updateDoc(doc(db, "lanzamientos", lanzamientoId), {
        window: {
          start: startISO,
          end: endISO
        }
      });
      misionActual.window = { start: startISO, end: endISO };
      mostrarNotificacion("‚úÖ Ventana de lanzamiento configurada", 'success');
    } catch(e) {
      mostrarNotificacion(`‚ùå Error: ${e.message}`, 'error');
    } finally {
      submitBtn.disabled = false;
    }
  });

  const btnEditarWindow = document.getElementById('btnEditarWindow');
  btnEditarWindow.addEventListener("click", () => {
    if(!misionActual || !misionActual.window) return;
    
    const inicio = new Date(misionActual.window.start);
    const fin = new Date(misionActual.window.end);
    
    formWindow.windowStartDate.value = inicio.toISOString().split('T')[0];
    formWindow.windowStartTime.value = inicio.toISOString().split('T')[1].substring(0, 8);
    formWindow.windowEndDate.value = fin.toISOString().split('T')[0];
    formWindow.windowEndTime.value = fin.toISOString().split('T')[1].substring(0, 8);
    
    windowDisplay.style.display = 'none';
    formWindow.style.display = 'block';
    btnEliminarWindow.style.display = 'none';
    btnEditarWindow.style.display = 'none';
    formWindow.querySelector('button[type="submit"]').textContent = 'Guardar Cambios';
  });

  btnEliminarWindow.addEventListener("click", async () => {
    if(!lanzamientoId) return mostrarNotificacion("‚ö†Ô∏è Selecciona una misi√≥n primero", 'error');
    
    if(!confirm("¬øEst√°s seguro de eliminar la ventana de lanzamiento?")) return;
    
    btnEliminarWindow.disabled = true;

    try {
      await updateDoc(doc(db, "lanzamientos", lanzamientoId), {
        window: null
      });
      misionActual.window = null;
      mostrarNotificacion("‚úÖ Ventana de lanzamiento eliminada", 'success');
    } catch(e) {
      mostrarNotificacion(`‚ùå Error: ${e.message}`, 'error');
    } finally {
      btnEliminarWindow.disabled = false;
    }
  });

  // Bot√≥n Reanudar
  btnReanudar.addEventListener("click", async () => {
    if(!misionActual) return mostrarNotificacion("‚ö†Ô∏è Selecciona una misi√≥n primero", 'error');
    if(!misionActual.holdTime) return mostrarNotificacion("‚ö†Ô∏è No hay tiempo de hold registrado", 'error');
    
    btnReanudar.disabled = true;
    
    try {
      // Calcular el tiempo transcurrido desde el hold hasta ahora
      const tiempoHold = new Date(misionActual.holdTime);
      const ahora = new Date();
      const tiempoTranscurrido = ahora - tiempoHold;
      
      // Obtener el T-0 original
      const t0Original = getLaunchUTC(misionActual.fecha, misionActual.timeUTC);
      
      // Calcular el nuevo T-0 (T-0 original + tiempo transcurrido)
      const nuevoT0 = new Date(t0Original.getTime() + tiempoTranscurrido);
      
      // Formatear la nueva fecha y hora
      const nuevaFecha = `${String(nuevoT0.getUTCDate()).padStart(2, '0')}/${String(nuevoT0.getUTCMonth() + 1).padStart(2, '0')}/${nuevoT0.getUTCFullYear()}`;
      const nuevaHora = `${String(nuevoT0.getUTCHours()).padStart(2, '0')}:${String(nuevoT0.getUTCMinutes()).padStart(2, '0')}:${String(nuevoT0.getUTCSeconds()).padStart(2, '0')}`;
      
      // Actualizar en Firebase
      await updateDoc(doc(db, "lanzamientos", misionActual.id), {
        fecha: nuevaFecha,
        timeUTC: nuevaHora,
        utcTime: nuevoT0.toISOString(),
        estado: "programado",
        holdTime: null
      });
      
      // Actualizar localmente
      misionActual.fecha = nuevaFecha;
      misionActual.timeUTC = nuevaHora;
      misionActual.estado = "programado";
      misionActual.holdTime = null;
      
      // Actualizar UI
      form.fecha.value = nuevaFecha.split("/").reverse().join("-");
      form.hora.value = nuevaHora;
      estadoElem.textContent = "Programado";
      estadoElem.className = "badge programado";
      holdTimeElem.textContent = "";
      btnReanudar.style.display = 'none';
      tiempoCongelado = null;
      
      mostrarNotificacion("‚úÖ Cuenta regresiva reanudada", 'success');
    } catch(e) {
      mostrarNotificacion(`‚ùå Error al reanudar: ${e.message}`, 'error');
    } finally {
      btnReanudar.disabled = false;
    }
  });
});
  </script>

  <style>
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
  background: #0d0d0d;
  color: #e0e0e0;
  padding: 1.5rem;
  max-width: 900px;
  margin: 0 auto;
  line-height: 1.5;
}

h1 {
  font-size: 1.8rem;
  margin-bottom: 1.5rem;
  color: #00ffcc;
  text-align: center;
  font-weight: 600;
}

.section {
  background: #1a1a1a;
  border: 1px solid #333;
  border-radius: 8px;
  padding: 1rem;
  margin-bottom: 1rem;
}

.section-title {
  font-size: 0.85rem;
  color: #888;
  margin-bottom: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  font-weight: 600;
}

.mission-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.5rem;
  padding-bottom: 0.75rem;
  border-bottom: 1px solid #333;
}

#missionName {
  font-size: 1.1rem;
  color: #00ffcc;
  font-weight: 600;
}

select, input {
  width: 100%;
  padding: 0.65rem;
  background: #0a0a0a;
  color: #fff;
  border: 1px solid #444;
  border-radius: 6px;
  font-size: 0.95rem;
  font-family: inherit;
}

select:focus, input:focus {
  outline: none;
  border-color: #00ffcc;
  background: #111;
}

.info-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.6rem 0;
  border-bottom: 1px solid #282828;
}

.info-row:last-child {
  border-bottom: none;
}

.info-label {
  color: #999;
  font-size: 0.9rem;
}

.badge {
  padding: 0.35rem 0.85rem;
  border-radius: 16px;
  font-size: 0.8rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.badge.programado { background: #0066ff; color: #fff; }
.badge.hold { background: #ffcc00; color: #000; }
.badge.scrub { background: #ff4444; color: #fff; }
.badge.exito { background: #00cc66; color: #fff; }
.badge.fallo { background: #990000; color: #fff; }
.badge.en.vuelo { background: #0066ff; color: #fff; }
.badge.desconocido { background: #666; color: #fff; }

#contadorDisplay {
  text-align: center;
  font-size: 3rem;
  font-weight: 700;
  color: #00ffcc;
  font-family: 'Courier New', monospace;
  padding: 1.5rem 0;
  letter-spacing: 0.05em;
}

#holdTime {
  text-align: center;
  color: #ffcc00;
  font-size: 0.9rem;
  margin-top: 0.5rem;
  font-weight: 500;
}

.switch-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem 0;
}

.switch {
  position: relative;
  display: inline-block;
  width: 50px;
  height: 26px;
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0; left: 0; right: 0; bottom: 0;
  background-color: #444;
  transition: 0.3s;
  border-radius: 26px;
}

.slider:before {
  position: absolute;
  content: "";
  height: 20px;
  width: 20px;
  left: 3px;
  bottom: 3px;
  background-color: white;
  transition: 0.3s;
  border-radius: 50%;
}

input:checked + .slider {
  background-color: #00cc66;
}

input:checked + .slider:before {
  transform: translateX(24px);
}

#labelTelemetria {
  margin-left: 0.6rem;
  font-size: 0.9rem;
  font-weight: 700;
  color: #999;
}

input:checked ~ #labelTelemetria {
  color: #00cc66;
}

.form-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0.75rem;
  margin-bottom: 0.75rem;
}

button {
  padding: 0.65rem 1rem;
  border: none;
  border-radius: 6px;
  font-size: 0.85rem;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.2s ease;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

button:hover:not(:disabled) {
  opacity: 0.85;
  transform: translateY(-1px);
}

button:active:not(:disabled) {
  transform: translateY(0);
}

button:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.btn-submit {
  width: 100%;
  background: #00ffcc;
  color: #000;
}

.btn-danger {
  width: 100%;
  background: #ff4444;
  color: #fff;
  margin-top: 0.5rem;
}

.btn-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 0.6rem;
}

@media (max-width: 600px) {
  body {
    padding: 1rem;
  }
  
  .btn-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  #contadorDisplay {
    font-size: 2.2rem;
  }
}

.btn-programado { background: #0066ff; color: #fff; }
.btn-hold { background: #ffcc00; color: #000; }
.btn-scrub { background: #ff4444; color: #fff; }
.btn-exito { background: #00cc66; color: #fff; }
.btn-fallo { background: #990000; color: #fff; }
.btn-envuelo { background: #0066ff; color: #fff; }
.btn-reanudar { 
  background: #00cc66; 
  color: #fff;
  font-size: 0.9rem;
}

.notificacion {
  position: fixed;
  top: 1.5rem;
  right: 1.5rem;
  padding: 0.85rem 1.2rem;
  border-radius: 6px;
  font-size: 0.9rem;
  font-weight: 600;
  z-index: 1000;
  display: none;
  box-shadow: 0 4px 12px rgba(0,0,0,0.5);
}

.notificacion.success {
  background: #00cc66;
  color: #fff;
}

.notificacion.error {
  background: #ff4444;
  color: #fff;
}

.window-display {
  background: #0a0a0a;
  padding: 0.85rem;
  border-radius: 6px;
  border: 1px solid #333;
  margin-bottom: 0.75rem;
}

.window-info {
  display: flex;
  justify-content: space-between;
  margin-bottom: 0.6rem;
  font-size: 0.9rem;
}

.window-info:last-child {
  margin-bottom: 0;
}

.window-info span:first-child {
  color: #999;
}

.window-info span:last-child {
  color: #00ffcc;
  font-family: monospace;
  font-weight: 600;
}

#lanzamientoId {
  font-family: monospace;
  font-size: 0.85rem;
  color: #00ffcc;
  cursor: pointer;
  transition: opacity 0.2s;
}

#lanzamientoId:hover {
  opacity: 0.7;
}
  </style>
</head>
<body>
  <h1>üöÄ Control de Lanzamiento</h1>

  <div class="section">
    <div class="section-title">Selecci√≥n de Misi√≥n</div>
    <select id="selectorMision">
      <option value="">-- Selecciona una misi√≥n --</option>
    </select>
    <div class="mission-header" style="margin-top: 0.75rem;">
      <span id="missionName">--</span>
      <span id="estadoActual" class="badge">Desconocido</span>
    </div>
  </div>

  <div class="section">
    <div id="contadorDisplay">--:--:--</div>
    <div id="holdTime"></div>
  </div>

  <div class="section">
    <div class="section-title">Control de Estado</div>
    <div class="btn-grid">
      <button class="btn-programado" data-estado="programado">Programado</button>
      <button class="btn-hold" data-estado="hold">Hold</button>
      <button class="btn-scrub" data-estado="scrub">Scrub</button>
      <button class="btn-exito" data-estado="exito">√âxito</button>
      <button class="btn-fallo" data-estado="fallo">Fallo</button>
      <button class="btn-envuelo" data-estado="en vuelo">En Vuelo</button>
    </div>
    <button id="btnReanudar" class="btn-reanudar" style="display: none; margin-top: 0.75rem; width: 100%;">‚ñ∂Ô∏è Reanudar Cuenta Regresiva</button>
  </div>

  <div class="section">
    <div class="section-title">Modificar T-0</div>
    <form id="formT0">
      <div class="form-grid">
        <input type="date" name="fecha" required>
        <input type="time" name="hora" step="1" required>
      </div>
      <button type="submit" class="btn-submit">Actualizar T-0</button>
    </form>
  </div>

  <div class="section">
    <div class="section-title">Ventana de Lanzamiento</div>
    
    <div id="windowDisplay" class="window-display" style="display: none;">
      <div class="window-info">
        <span>Inicio:</span>
        <span id="windowStart">--</span>
      </div>
      <div class="window-info">
        <span>Fin:</span>
        <span id="windowEnd">--</span>
      </div>
      <div class="window-info">
        <span>Duraci√≥n:</span>
        <span id="windowDuration">--</span>
      </div>
      <button id="btnEditarWindow" class="btn-submit">Editar Ventana</button>
      <button id="btnEliminarWindow" class="btn-danger">Eliminar Ventana</button>
    </div>

    <form id="formWindow" style="display: none;">
      <div class="form-grid">
        <input type="date" name="windowStartDate" required placeholder="Fecha inicio">
        <input type="time" name="windowStartTime" step="1" required placeholder="Hora inicio">
      </div>
      <div class="form-grid">
        <input type="date" name="windowEndDate" required placeholder="Fecha fin">
        <input type="time" name="windowEndTime" step="1" required placeholder="Hora fin">
      </div>
      <button type="submit" class="btn-submit">Establecer Ventana</button>
    </form>
  </div>

  <div class="section">
    <div class="section-title">Telemetr√≠a</div>
    <div class="switch-row">
      <span>üì° Transmisi√≥n de datos</span>
      <div style="display: flex; align-items: center;">
        <label class="switch">
          <input type="checkbox" id="switchTelemetria">
          <span class="slider"></span>
        </label>
        <span id="labelTelemetria">OFF</span>
      </div>
    </div>
  </div>

  <div class="section">
    <div class="info-row">
      <span class="info-label">ID de Lanzamiento</span>
      <span id="lanzamientoId" title="Click para copiar">--</span>
    </div>
  </div>

  <div id="notificacion" class="notificacion"></div>
</body>
</html>
